# Day 28 of Summer Internship

*Date: July 6th, 2019*

Saturday again. Not in much of a mood to code, I decided to complete the documentation of my project. I added more special commands, like [@todo](http://www.doxygen.nl/manual/commands.html#cmdtodo) to specify what is left to do and [@warning](http://www.doxygen.nl/manual/commands.html#cmdwarning) to specify the warnings for the end cases or improper usage. The I specified the command line parameters that the files expect using @param.

While writing the todo, I remembered the read issue I had in my python service. The issue was that if the watchlog file has content prior to the start of service, then the service will take all the content at once despite the lines being separated by the newline character ('\n') and then give IOError. I had to modify it, give it a functionality like [``tail -1f``](https://www.computerhope.com/unix/utail.htm) command of Linux. For this, I searched the net and got many solutions. I was using the [``read()``](https://www.tutorialspoint.com/python3/file_read.htm) method by asking it to read 1024 characters (the average size of line). Some suggested to use [``readlines()``](https://www.tutorialspoint.com/python3/file_readlines.htm), but it was continuously reading the last line again and again. Some said to iterate over the file and then save the last line but that was just of waste of CPU time and also not suitable for my use.

I then decided to sacrifice my code's portability to use [subprocess](https://docs.python.org/3/library/subprocess.html) module to actually run ``tail -1f``. Initially it looked to be working fine, but it had it own issues. It was difficult to obtain the output as a string. Even [check_output](https://docs.python.org/3/library/subprocess.html#subprocess.check_output) wasn't much helpful for me. Another concern was that what if the service will just execute ``tail -1f`` and get locked at it.

And then I noticed another method of python, [readline()](https://www.tutorialspoint.com/python3/file_readline.htm) (notice the absent of 's'). Basically it reads only a single line. Another using readline() solved my problem. Now it was reading one line at a time and after reading all the lines, it would wait for new lines to come. And this was excatly the behavior that I wanted.

Now there was one thing that I was pondering over. This code, this software in itself can never be "completed". That's because it's functioning is tightly bound to the mail server. And mail servers come in a variety of flavors. The best that I provide is a software that does its work after receiving instructions from the mail server. So I had to make it so that all the critical parameters are provided by the server, possibly via command line, so that the software is completely flexible and independent of the mail server which is using this. Also, I need to write proper instructions for anyone who may wish to utilise this software. Because if I don't, it's gonna be a 3D horror movie:

![](https://qph.fs.quoracdn.net/main-qimg-249a6ffdad97165a773968a7ee86c072) 
